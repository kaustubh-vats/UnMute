const SCRIPT_ID="unmute__script";document.addEventListener("DOMContentLoaded",()=>{chrome.storage.local.get(["timerCoords"],function(t){createScript(t.timerCoords)})});const getKey=t=>t.includes("meet.google")?"meet":"zoom",getData=(t,e)=>{if(t)return t[e]},getOrDefault=(t,e)=>getData(e,getKey(t))||getData(e,"default");window.addEventListener("message",t=>{try{let e=JSON.parse(t.data);"UNMUTE_UPDATE_TIMER_X"===e.message?chrome.storage.local.get(["timerCoords"],function(t){let r=t||{timerCoords:{}};r.timerCoords||(r.timerCoords={}),r.timerCoords[getKey(location.hostname)]=e.value,r.timerCoords.default=e.value,chrome.storage.local.set(r,function(){})}):"UNMUTE_UPDATE_TIMER_THEME"===e.message?chrome.storage.local.set({darkTheme:!0===e.value},function(){}):"UNMUTE_UPDATE_TIMER_UNMUTE_ON_SPACE"===e.message?chrome.storage.local.set({spaceShortcut:!0===e.value},function(){}):"UNMUTE_UPDATE_TIMER_AUTO_RECORD"===e.message&&chrome.storage.local.set({autoTimer:!0===e.value},function(){})}catch(r){}});const getScript=()=>document.querySelector("#"+SCRIPT_ID),removeScript=()=>{let t=getScript();t&&t.remove()},createScript=(t,e,r,a)=>{if(getScript())return;let s=getOrDefault(location.hostname,t),o=chrome.runtime.getURL("css/styles.css"),i=document.createElement("script");i.setAttribute("data-cssurl",o),i.setAttribute("id",SCRIPT_ID),i.setAttribute("src",chrome.runtime.getURL("js/unmute.js")),i.setAttribute("data-timerx",s?.x),i.setAttribute("data-timery",s?.y),i.setAttribute("data-autoTimer",!0===r),i.setAttribute("data-spaceShortcut",!0===a),i.setAttribute("data-darkTheme",!0===e),document.body.appendChild(i)};try{chrome.storage.local.get(["timerCoords","darkTheme","autoTimer","spaceShortcut"],function(t){createScript(t.timerCoords,t.darkTheme,t.autoTimer,t.spaceShortcut)})}catch(t){}